# Basic Pentesting

> *Una receta para encontrar vulnerabilidades, contada como si estuvi√©ramos cocinando un pachamanca: aromas, pasos, condimentos y ‚Äîal final‚Äî el bocado que nos llena de emoci√≥n. pero si quieres tener ladocumentacion te la dejo aqui*

<p align="left">
  <a href='report-basicpentester.pdf'>
    <img width="50%" src="assets/report-basicpentester-tryhackme_page-0001.jpg" alt="Report Basic Pentester" />
  </a>
</p>

---

## üßë‚Äçüç≥ Introducci√≥n (Entrada caliente)

**writeup** ‚ÄúBasic Pentesting: TryHackMe‚Äù escrito por **nidev**. Guia una pr√°ctica de pentesting en TryHackMe que cubre: enumeraci√≥n, explotaci√≥n y escalada de privilegios ‚Äîcon herramientas cl√°sicas‚Äî para completar un CTF did√°ctico.

> En la imagen se ve un ping con solo 1 paquete el `-c` con la IP de la m√°quina que es `10.201.50.202`.
![Ping a la m√°quina objetivo](assets/image.png)

---

## ü•£ Ingredientes principales (Herramientas y conceptos)

En nuestra cocina de seguridad utilizamos las siguientes ‚Äúespecias‚Äù y utensilios fundamentales:

* **Nmap** ‚Äî para olfatear puertos y servicios.
* **Nikto**, **Gobuster** ‚Äî para raspar y buscar directorios/archivos en servidores web.
* **enum4linux**, **smbclient** ‚Äî para olfatear y leer recursos SMB.
* **Nmap NSE / ssh-brute** o **Hydra** ‚Äî para ataques de fuerza bruta sobre SSH.
* **LinEnum / LinPeas** ‚Äî para automatizar la b√∫squeda de vectores de escalada en Linux.
* **scp**, **ssh**, **John the Ripper** ‚Äî para mover archivos, autenticarnos y quebrar claves cifradas.
  Estos elementos aparecen en el writeup como los pasos y herramientas clave para avanzar en el reto.

---

## üî• Preparaci√≥n paso a paso (La receta)

Imagina que est√°s en una cocina: cada fase del pentest es como preparar una parte del plato.

### 1. Mise en place ‚Äî Despliegue y escaneo

* Se despliega la m√°quina objetivo en TryHackMe y se lanza un escaneo Nmap para ver puertos abiertos. El autor encontr√≥ m√∫ltiples puertos abiertos (seis en su ejemplo), lo que ya nos da una buena base para seguir husmeando.

*A continuaci√≥n se muestran capturas del escaneo Nmap y resultados iniciales.*

![Escaneo Nmap - captura 1](image.png)

![Escaneo Nmap - detalles adicionales](image-1.png)

![Escaneo Nmap - puertos abiertos y servicios](image-2.png)


---

### 2. Degustaci√≥n del front-end ‚Äî Enumeraci√≥n HTTP

* Abrimos la web y, al inspeccionar la fuente, hay una pista: un comentario que apunta a una secci√≥n `dev` ‚Äî¬°una especia escondida!
* Se usa **Nikto** para escanear el servidor web y **Gobuster** para descubrir directorios. Ambos devolvieron rutas interesantes, entre ellas `/development/`, que ocultaba archivos con informaci√≥n jugosa. 

**Hallazgo clave:** `/development/` (archivo `dev.txt` y `j.txt`) ‚Äî contiene una conversaci√≥n y pistas sobre usuarios y contrase√±as. ([Medium][1])

*Capturas de la enumeraci√≥n web y descubrimiento de `/development/`.*

![Nikto - resultados](image-3.png)

![Gobuster - descubrimiento de directorios](image-4.png)

![Contenido de /development/ ‚Äî dev.txt / j.txt](image-5.png)


---

### 3. Hurgando en la despensa ‚Äî SMB Enumeration

* Con **enum4linux** se descubre que existe una cuenta an√≥nima y un recurso compartido accesible. Ah√≠ se encontr√≥ un `staff.txt` con nombres completos: **Jan** y **Kay**, conectando las pistas del sitio web con usuarios del sistema. ([Medium][1])

*Capturas relacionadas con SMB y enum4linux/smbclient.*

![Enum4linux ‚Äî descubrimiento de SMB](image-6.png)

![Acceso a recurso compartido SMB ‚Äî listado de archivos](image-7.png)

![Contenido de staff.txt y pistas de usuarios](image-8.png)


---

### 4. El golpe maestro ‚Äî Explotaci√≥n (Brute-force SSH)

* Con la lista de usuarios (`jan`, `kay`) y una wordlist (ej. `rockyou.txt`), se emple√≥ el script NSE `ssh-brute` de Nmap (o alternativamente **Hydra**) para forzar credenciales SSH.
* Resultado: credenciales v√°lidas encontradas: **usuario** `Jan` con **contrase√±a** `Armando` (se accede por SSH). ¬°Bocado conseguido! ([Medium][1])

*Capturas del intento de conexi√≥n SSH, resultado de brute-force y acceso.*

![Brute-force / intento SSH - logs y resultados](image-9.png)

![Acceso SSH conseguido ‚Äî sesi√≥n interactiva (antes)](image-10.png)

![Acceso SSH ‚Äî sesi√≥n interactiva (detalle)](image-11.png)


---

### 5. El postre ‚Äî Escalada de privilegios

* Una vez dentro como `jan`, se realiza una nueva enumeraci√≥n (manual y con LinEnum/LinPeas). Ah√≠ aparece algo muy sabroso: en el home de **kay** existe `.ssh/id_rsa` (clave privada) con permisos peligrosos. ([Medium][1])
* Se copia la clave (`scp`) y, tras ajustar permisos, se descubre que la clave privada est√° protegida por una passphrase. Usando **John the Ripper** se quiebra la passphrase; con ello se logra el acceso a la cuenta `kay`. Desde `kay` (miembro de `sudo`), se obtiene la contrase√±a final/flag:
  `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`.

*Capturas de la b√∫squeda de archivos sensibles, copia de `id_rsa`, cracking de passphrase y escalada final.*

![Encontrando .ssh/id_rsa en el home de kay](image-12.png)

![Copia de la clave privada con scp / ajuste de permisos](image-13.png)

![John the Ripper ‚Äî cracking de passphrase (proceso)](image-14.png)

![Acceso como kay y uso de sudo para obtener la flag/contrase√±a final](image-15.png)


---

## üìã Resumen del plato (Recap)

Pasos recorridos en el flujo del pentest:

1. **Enumeraci√≥n** ‚Äî Nmap, Nikto, Gobuster, enum4linux.
2. **Explotaci√≥n** ‚Äî Fuerza bruta SSH (NSE/Hydra) ‚Üí credenciales v√°lidas.
3. **Escalada** ‚Äî LinEnum/LinPeas + robo y cracking de clave privada ‚Üí acceso a usuario con `sudo`.
4. **Flag / Remate** ‚Äî Se obtiene la contrase√±a final y se completa el CTF. ([Medium][1])

*Im√°genes complementarias y evidencia adicional (salidas, comandos y pantallas).*

![Salida de comandos y pasos intermedios 1](image-16.png)

![Salida de comandos y pasos intermedios 2](image-17.png)

![Detalles de logs y archivos revisados](image-18.png)

![Captura de sesiones y movimientos laterales](image-19.png)

![M√°s evidencia ‚Äî listas y outputs](image-20.png)


---

## üçΩÔ∏è Lecciones de cocina (Buenas pr√°cticas y recomendaciones)

* **Nunca conf√≠es en permisos laxos**: archivos sensibles (.ssh/id_rsa) con permisos abiertos son una receta para desastre.
* **Firme pol√≠tica de contrase√±as**: contrase√±as simples o repetidas entre servicios son ingredientes que facilitan brute-force.
* **Registro y ROE**: en escenarios reales firma siempre un *Rule Of Engagement* antes de tocar sistemas ajenos.
* **Automatizar con cuidado**: herramientas como LinEnum y LinPeas son poderosas para ahorrar tiempo, pero aprender m√©todos manuales es crucial para entender la ra√≠z del problema.

*Im√°genes relacionadas con recomendaciones y resultados finales.*

<!-- ![Buenas pr√°cticas y hallazgos finales](image-21.png)

![Resumen visual de errores de configuraci√≥n](image-22.png) -->
